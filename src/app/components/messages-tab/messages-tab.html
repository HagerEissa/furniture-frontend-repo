<div class="messages-tab container mt-4">

    @if (loading) {
        <div class="text-center mt-4">
        <p>Loading messages...</p>
        </div>
    }

    @if (error) {
        <div class="alert alert-danger">{{ error }}</div>
    }

    @if (!loading && !error && messages.length) {
        <div class="table-wrapper">
        <table class="table table-striped table-bordered align-middle">
            <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Message</th>
                <th>Date</th>
                <th>Delete</th>
            </tr>
            </thead>
        </table>

        <div class="table-scroll">
            <table class="table table-striped table-bordered align-middle">
            <tbody>
                @for (msg of messages; track msg._id) {
                <tr>
                    <td>{{ msg.name }}</td>
                    <td>{{ msg.email }}</td>
                    <td>{{ msg.message }}</td>
                    <td>{{ msg.createdAt | date: 'short' }}</td>
                    <td>
                    <button
                        class="btn btn-sm btn-danger"
                        (click)="deleteMessage(msg._id)"
                        title="Delete message"
                    >
                        <i class="bi bi-trash"></i>
                    </button>
                    </td>
                </tr>
                }
                @empty {
                <tr>
                    <td colspan="5" class="text-center text-muted">
                    No messages found
                    </td>
                </tr>
                }
            </tbody>
            </table>
        </div>
        </div>
    }  @else if (!loading && !error && !messages.length) {
        <div class="gold-alert text-center mt-3">
            <i class="bi bi-envelope-paper-heart"></i>
            <p>No messages yet.</p>
        </div>
}

</div>
